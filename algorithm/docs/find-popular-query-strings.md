# 如何查询最热门的查询串

## 描述
搜索引擎会通过日志文件把用户每次检索使用的所有查询串都记录下来，每个查询串的长度为1～255字节。
假设目前有1000万个记录（这些查询串的重复度比较高，虽然总数是1000万，但如果除去重复后，不超过300万个。
一个查询串的重复度越高，说明查询它的用户越多，也就是越热门），请统计最热门的10个查询串，要求使用的内存不能超过1G。

## 解答
### 分治法
1. hash拆分文件到内存可一次载入的程度
2. 构建topk堆

### map法
map所需要的空间为300万×（255+4）=3MB×259=777MB（其中，4表示用来记录字符串出现次数的整数占用4个字节）。由此可见1G的内存空间是足够用的。
1. 遍历字符串，存入map
2. topk堆

### trie树法
#### 扩展
Trie树，即字典树，又称单词查找树或键树，是一种树形结构。
**典型应用是用于统计和排序大量的字符串（但不仅限于字符串），所以经常被搜索引擎系统用于文本词频统计;字符串查找，判断是否有重复的字符串。
它的优点是最大限度地减少无谓的字符串比较，查询效率比较高。**

Trie的核心思想是空间换时间，利用字符串的公共前缀来降低查询时间的开销以达到提高效率的目的。

它有3个基本性质：
* 根节点不包含字符，除根节点外每一个节点都只包含一个字符。
* 从根节点到某一节点，路径上经过的字符连接起来，为该节点对应的字符串。
* 每个节点的所有子节点包含的字符都不相同。

## 参考
* Go程序员面试算法宝典
* [Trie树（字典树）](https://wizardforcel.gitbooks.io/the-art-of-programming-by-july/content/06.09.html)
* [Trie维基百科](https://zh.wikipedia.org/wiki/Trie)